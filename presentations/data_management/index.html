<!DOCTYPE html>
<html>
<head>
  <title>Data analysis best practice</title>
  <meta charset="utf-8">
  <meta name="description" content="Data analysis best practice">
  <meta name="author" content="Robert Arbon">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="../librariesNew/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="../librariesNew/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="../librariesNew/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="../librariesNew/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  
  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="../librariesNew/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="../librariesNew/frameworks/io2012/js/slides" 
    src="../librariesNew/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Data analysis best practice</h1>
    <h2>Data management</h2>
    <p>Robert Arbon<br/>Data scientist, Jean Golding Institute</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Overview</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>FAIR principles</li>
<li>Storing your data and research</li>
<li>Backing up</li>
<li>Metadata</li>
<li>Tidy data</li>
<li>Retrieving data</li>
<li>File formats</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Your research</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Your research includes: 

<ul>
<li>Raw data</li>
<li>Processed data </li>
<li>Statistical analyses and models</li>
<li>Reports, presentations, papers</li>
</ul></li>
<li>Your data will be handled slightly different but general principles apply to all of your research. </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>FAIR principles</h2>
  </hgroup>
  <article data-timings="">
    <p>Your research should be FAIR</p>

<ul>
<li><strong>F</strong>indable

<ul>
<li>accurate abstracts and keywords </li>
<li>appears in search engines</li>
<li>use well known repositories</li>
</ul></li>
<li><strong>A</strong>ccessible

<ul>
<li>open access if possible (ethics may prevent this)</li>
<li>use web interfaces and APIs</li>
</ul></li>
<li><strong>I</strong>nteroperable

<ul>
<li>Adhear to open standards, nomenclature and common syntax</li>
<li>Good documentation</li>
<li>Open source software</li>
</ul></li>
<li><strong>R</strong>eusable

<ul>
<li>Can someone re-use your data, analysis and understand your reports?</li>
<li>Use permissable licences (e.g. MIT)</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Storing data</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>You&#39;ve collected your data, it can be in: 

<ul>
<li>Physical format e.g. paperwork, print-outs, samples. </li>
<li>Electronic data e.g. simulation results, electronic surveys, public datasets</li>
</ul></li>
<li>If not already in electronic format you&#39;ll transcribe the results to electronic format. </li>
<li>Wherever possible, <strong>KEEP YOUR RAW DATA</strong>

<ul>
<li>Physical fomat: keep it in a box, fridge, cupboard under the stairs etc. </li>
<li>Electronic format:

<ol>
<li>Keep in a <strong>READ ONLY</strong> subdirectory</li>
<li>The directory should be located on a <strong>MANAGED STORAGE DATA</strong> cluster (at least)</li>
</ol></li>
</ul></li>
</ul>

<p>If it&#39;s just stored on your personal computer <strong>YOU DON&#39;T HAVE IT</strong></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Storage locations - Bristol University</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Research Data Storage Facility, <a href="http://www.bristol.ac.uk/acrc/research-data-storage-facility/">RDSF</a></p>

<ul>
<li>good for long-term archiving of data</li>
<li>DOI available</li>
<li>your PI needs to apply for space</li>
<li>you can map the drive to your local machine (ask IT services for help)</li>
<li>there is a mechanism for sharing (we&#39;ll be using it later)</li>
</ul></li>
<li><p><a href="https://uob.sharepoint.com/sites/systemsupport/SitePages/onedrive-home.aspx">Microsoft OneDrive for Business</a></p>

<ul>
<li>good for backing up all files (not just data) and sharing with colleagues</li>
<li>personal space of 5TB</li>
<li>you can sync the drive with your local machine</li>
<li>not compatible with OSF (only personal OneDrive accounts are)</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Storage locations - Personal</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><a href="https://www.google.co.uk/drive/">Google Drive</a>/<a href="https://www.dropbox.com/">Dropbox</a></p>

<ul>
<li>Similar to OneDrive but only ~15GB free ( ~ Â£80/year/TB)</li>
<li>Compatible with OSF</li>
</ul></li>
<li><p><a href="https://figshare.com/">Figshare</a></p>

<ul>
<li>Similar to RDSF</li>
<li>5GB free</li>
<li>DOI available</li>
</ul></li>
<li><p>OSF has a default storage option</p>

<ul>
<li>Not recommended as sole place of storage</li>
<li>Users can add-in other storage services like Figshare, Google Drive etc. </li>
</ul></li>
<li><p>Many other services - please see <a href="http://help.osf.io/m/faqs/l/726460-faqs#what-is-the-cap-on-data-per-user-or-per-project">OSF-FAQ</a></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Backing up</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Backing up your research is <strong>NON NEGOTIABLE</strong></li>
<li>Redundancy is key: 

<ol>
<li>Use rolling back up of whole disk using:</li>
<li>external hard drive, e.g. Time Machine for Mac, Backup and Restore for Windows 10</li>
<li>cloud storage, e.g. <a href="https://www.backblaze.com/cloud-backup.html">Backblaze</a></li>
<li>Use OneDrive to back up all important directories</li>
<li>Keep important research data on RDSF</li>
<li>Back important code on Github</li>
</ol></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Metadata</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Metadata = data about the data, e.g.

<ul>
<li>units of measurement</li>
<li>variable explanation</li>
<li>how/when/where it was collected</li>
<li>software/hardware used</li>
<li>author information (contact details)</li>
</ul></li>
<li>Should be kept in separate files but in same directory as data </li>
<li>Often called a <em>data dictionary</em></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>Tidy data</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Most data sets need <strong>cleaning</strong> before they can be used. </li>
<li><strong>Cleaning</strong> involves:

<ul>
<li>Getting data into tables</li>
<li>Getting formats correct e.g., dates and times, units of measurement</li>
<li>Grouping observations together in meaningful ways</li>
<li>Tidying data: structuring datasets to facilitate analysis</li>
</ul></li>
<li><strong>Tidy data</strong> is a set of standards for organizig data values within a dataset.</li>
<li>You can read about it <a href="">here</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Tidy data  - Semantics</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><strong>Values</strong>: entries in a data set

<ul>
<li>Ranged: they have a consistent metric e.g. integers, floats</li>
<li>Factors: No consistent metric e.g.</li>
<li>Ordinal: ordered e.g. Likert scale</li>
<li>Categorical: unordered e.g. male/female/trans</li>
</ul></li>
<li><strong>Variable</strong>: measures an attribute</li>
<li><strong>Observation</strong>: all values measured on a unit (e.g. subject, time) across attributes. </li>
<li>Each value belongs to an observation and a variable. </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Tidy data - Semantics quiz</h2>
  </hgroup>
  <article data-timings="">
    <ul class = "build incremental">
<li><p>Q: Are <code>height</code> and <code>weight</code> variables or observations?</p></li>
<li><p>A: They are both variables. </p></li>
<li><p>Q: Are <code>height</code> and <code>width</code> variables or observations?</p></li>
<li><p>A: They could be both variables <strong>or</strong> observations of a <code>dimension</code> variable. </p></li>
<li><p>Conclusion: not always easy to make rules for what is a variable and what is an observation. </p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Tidy data - the rules</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Every variable is a column</li>
<li>Every observation is a row</li>
<li>Every type of observational unit forms a table</li>
</ol>

<ul>
<li>Variable vs observation - if there is ambiguity: 

<ul>
<li><strong>Wide format</strong>: <code>area = height * width</code> then <code>height</code> and <code>width</code> are variables</li>
<li><strong>Long format</strong>: summarise average height to average width then <code>height</code> and <code>width</code> are observations. </li>
<li>more on this when plotting. </li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Tidy data - tools</h2>
  </hgroup>
  <article data-timings="">
    <div class="rimage center"><img src="fig/tidyverse.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" width="100%" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 1</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Scores after 50 sec, 100 sec,..., 350 sec in a game</li>
<li>Q: Why isn&#39;t this tidy?</li>
</ul>

<pre><code>   Name  50 100 150 200 250 300 350
1 Carla 1.2 1.8 2.2 2.3 3.0 2.5 1.8
2  Mace 1.5 1.1 1.9 2.0 3.6 3.0 2.5
3   Lea 1.7 1.6 2.3 2.7 2.6 2.2 2.6
4 Karen 1.3 1.7 1.9 2.2 3.2 1.5 1.9
</code></pre>

<ul class = "build incremental">
<li>A: the columns are observations!</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 1</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>use <a href="https://tidyr.tidyverse.org/reference/gather.html"><code>gather</code></a> to make tidy:</li>
</ul>

<pre><code class="r">scores %&gt;%
  # Gather ALL columns and give default names to columns
  gather() %&gt;%
  headtail()
</code></pre>

<pre><code>    key value
1  Name Carla
2  Name  Mace
3  Name   Lea
30  350   2.5
31  350   2.6
32  350   1.9
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 1</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>use <a href="https://tidyr.tidyverse.org/reference/gather.html"><code>gather</code></a> to make tidy:</li>
</ul>

<pre><code class="r">scores %&gt;%
  # Gather all columns and give custom names to columns
  gather(key=&quot;MyVariable&quot;, value=&quot;MyValue&quot;) %&gt;%
  headtail()
</code></pre>

<pre><code>   MyVariable MyValue
1        Name   Carla
2        Name    Mace
3        Name     Lea
30        350     2.5
31        350     2.6
32        350     1.9
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 1</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>use <a href="https://tidyr.tidyverse.org/reference/gather.html"><code>gather</code></a> to make tidy:</li>
</ul>

<pre><code class="r">scores %&gt;%
  # Gather all columns except &#39;Name&#39; and give custom names to columns
  gather(key=&quot;Time&quot;, value=&quot;Score&quot;, -Name) %&gt;%
  headtail()
</code></pre>

<pre><code>    Name Time Score
1  Carla   50   1.2
2   Mace   50   1.5
3    Lea   50   1.7
26  Mace  350   2.5
27   Lea  350   2.6
28 Karen  350   1.9
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 2</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Q: What&#39;s wrong with this table of counts of males (<code>m</code>) and females (<code>f</code>) of different ages (<code>0.15</code> = 0 - 15) in different states</li>
</ul>

<pre><code>  state m0-15 m16-60 f0-15 f16-60
1    MA     5      7     6      1
2    NY     9      7     5      8
3    CN     7      4     7      9
4    OH     7     10     6      2
</code></pre>

<ul class = "build incremental">
<li>A: Columns as variables AND multiple variables in a column</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 2</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>First use <a href="https://tidyr.tidyverse.org/reference/gather.html"><code>gather</code></a></li>
</ul>

<pre><code class="r">df %&gt;%
  gather(key=&#39;sex-age&#39;, value=&#39;count&#39;, -state) %&gt;%
  headtail()
</code></pre>

<pre><code>   state sex-age count
1     MA   m0-15     5
2     NY   m0-15     9
3     CN   m0-15     7
14    NY  f16-60     8
15    CN  f16-60     9
16    OH  f16-60     2
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h3><code>tidyr</code> - example 2</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Then use  <a href="https://tidyr.tidyverse.org/reference/separate.html"><code>separate</code></a></li>
</ul>

<pre><code class="r">df %&gt;%
  gather(key=&#39;sex-age&#39;, value=&#39;count&#39;, -state) %&gt;%
  separate(col=&#39;sex-age&#39;, into=c(&#39;sex&#39;, &#39;age&#39;), sep=1) %&gt;%
  headtail()
</code></pre>

<pre><code>   state sex   age count
1     MA   m  0-15     5
2     NY   m  0-15     9
3     CN   m  0-15     7
14    NY   f 16-60     8
15    CN   f 16-60     9
16    OH   f 16-60     2
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Retrieving data</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>If you&#39;ve retrieved data - put a note to say where it&#39;s from:</p>

<div class="rimage center"><img src="fig/source.png" title="plot of chunk unnamed-chunk-9" alt="plot of chunk unnamed-chunk-9" width="75%" class="plot" /></div></li>
<li><p>Even better, write a script that downloads it: </p></li>
</ul>

<pre><code class="r">library(data.table)
file_name &lt;- &#39;dili_from_anti_TB_treatment.csv&#39;
base_url &lt;- &#39;http://data.bris.ac.uk/datasets/1vdt21e4mhxxd27hso89cqmhhh/&#39;
file_url &lt;- paste0(base_url, file_name)
df &lt;- fread(file_url)
save(df, file=&#39;local/directory/path&#39;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>File formats</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>File formats affect interoperability and accessibility. </li>
<li>Proprietory formats for data (e.g. custom binary format) or analysis scripts lower interoperability</li>
<li>For small, simple data text based formats work well e.g. <code>.csv</code></li>
<li>For structured data use <a href="https://www.w3schools.com/xml/xml_whatis.asp"><code>XML</code></a> or  <a href="https://www.json.org/"><code>json</code></a> or database format e.g. <a href="https://www.mysql.com/"><code>mySQL</code></a></li>
<li>For large data sets use things like <a href="https://support.hdfgroup.org/HDF5/"><code>HDF5</code></a> which are usable without loading into memory. </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Overview'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Your research'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='FAIR principles'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Storing data'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Storage locations - Bristol University'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Storage locations - Personal'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Backing up'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Metadata'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Tidy data'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Tidy data  - Semantics'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Tidy data - Semantics quiz'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Tidy data - the rules'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Tidy data - tools'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='<code>tidyr</code> - example 1'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='<code>tidyr</code> - example 1'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='<code>tidyr</code> - example 1'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='<code>tidyr</code> - example 1'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='<code>tidyr</code> - example 2'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='<code>tidyr</code> - example 2'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='<code>tidyr</code> - example 2'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Retrieving data'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='File formats'>
         22
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../librariesNew/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="../librariesNew/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>